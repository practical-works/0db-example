//==============================================================================
// ■ App (app.js)
//------------------------------------------------------------------------------
//     Application entry point.
//==============================================================================
require("./utils");
const app = require("express")();

//------------------------------------------------------------------------------
// ► Exports
//------------------------------------------------------------------------------
module.exports = app;

//------------------------------------------------------------------------------
// ● Reloader
//------------------------------------------------------------------------------
if (app.get("env") === "development") {
  const reloader = require("./reloader");
  app.use(reloader);
}

//------------------------------------------------------------------------------
// ● Console-Logger
//------------------------------------------------------------------------------
const morgan = require("morgan");
app.use(morgan("dev"));

//------------------------------------------------------------------------------
// ● Body-Parser
//------------------------------------------------------------------------------
const { json, urlencoded } = require("body-parser");
app.use(json());
app.use(urlencoded({ extended: true }));

//------------------------------------------------------------------------------
// ● Cookie-Session
//------------------------------------------------------------------------------
const cookieSession = require("cookie-session");
app.use(
  cookieSession({
    name: "0db-example",
    keys: ["a4d1-f4hh-110x-1c44-5sd1x", "c47f-x4s1-7xx8-s5e1-a5s1"],
  })
);

//------------------------------------------------------------------------------
// ● Router
//------------------------------------------------------------------------------
const router = require("./router");
app.use(router);

//------------------------------------------------------------------------------
// ● Template-Engine
//------------------------------------------------------------------------------
app.set("view engine", "ejs");
app.set("views", "./");
